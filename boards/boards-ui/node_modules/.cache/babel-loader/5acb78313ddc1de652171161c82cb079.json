{"ast":null,"code":"import React,{useEffect,useState}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Modal,Button}from'react-bootstrap';import{withFormik,Form,Field,Formik}from'formik';import*as Yup from\"yup\";import{withRouter}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewTopic(props){var openTopic=props.openTopic,handleCloseTopic=props.handleCloseTopic,history=props.history,match=props.match;var id=match.params.id;var tokens=localStorage.tokens;var validationSchema=Yup.object().shape({subject:Yup.string().required('subject is wrong')},[id]);var handleSubmit=function handleSubmit(values){var data=new FormData();data.append(\"photo1\",values.photo1);console.log(data);console.log(values);useEffect(function(){axios({method:\"POST\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json'},url:\"http://127.0.0.1:8000/api/board/\".concat(id,\"/new/\")});},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{show:openTopic,onHide:handleCloseTopic,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\" New Topic \"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{subject:\"\"},onSubmit:handleSubmit,validationSchema:validationSchema,children:function children(props){return/*#__PURE__*/_jsxs(Form,{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"subject\"}),/*#__PURE__*/_jsx(Field,{type:\"text\",name:\"subject\",id:\"subject\",className:\"form-control \",placeholder:\"subject\"}),props.touched.subject&&props.errors.subject&&/*#__PURE__*/_jsx(\"span\",{className:\"help-block text-danger\",children:props.errors.subject}),/*#__PURE__*/_jsx(\"input\",{multiple:true,type:\"file\",name:\"file\",onChange:function onChange(event){props.setFieldValue(\"media\",event.target.files[0]);}})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCloseTopic,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-2\",children:\"Create\"})]})]});}})})})]})});};}export default withRouter(NewTopic);","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/NewTopic/newtopic.js"],"names":["React","useEffect","useState","Modal","Button","withFormik","Form","Field","Formik","Yup","withRouter","axios","NewTopic","props","openTopic","handleCloseTopic","history","match","id","params","tokens","localStorage","validationSchema","object","shape","subject","string","required","handleSubmit","values","data","FormData","append","photo1","console","log","method","headers","url","touched","errors","event","setFieldValue","target","files"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Modal, Button } from 'react-bootstrap'\nimport { withFormik, Form, Field, Formik } from 'formik';\nimport * as Yup from \"yup\";\nimport {withRouter} from \"react-router-dom\";\nimport axios from \"axios\";\n\n\nfunction NewTopic(props) {\n    const {openTopic, handleCloseTopic, history, match} = props;\n    const id = match.params.id\n    const tokens = localStorage.tokens;\n    const validationSchema = Yup.object().shape({\n        subject: Yup.string().required('subject is wrong'),\n    }, [id])\n\n\n    const handleSubmit = (values) => {\n        let data = new FormData();\n        data.append(\"photo1\", values.photo1);\n        console.log(data)\n        console.log(values)\n\n        useEffect(() => {\n\n            axios({\n                method: \"POST\",\n                headers: {\n                    'Authorization': `Token ${tokens}`,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                url: `http://127.0.0.1:8000/api/board/${id}/new/`\n            })\n\n        }, [])\n\n        return (\n            <div>\n                <Modal show={openTopic} onHide={handleCloseTopic}>\n\n                    <Modal.Header closeButton>\n                        <Modal.Title> New Topic </Modal.Title>\n                    </Modal.Header>\n\n                    <Modal.Body>\n                        <React.Fragment>\n\n                            <Formik\n                                initialValues={{subject: \"\"}}\n                                onSubmit={handleSubmit}\n                                validationSchema={validationSchema}\n                            >\n                                {props => (\n                                    <Form className=\"form-container\">\n                                        <div className=\"form-group\">\n                                            <label htmlFor=\"name\">subject</label>\n                                            <Field type=\"text\" name=\"subject\" id={\"subject\"} className={\"form-control \"}\n                                                   placeholder=\"subject\"/>\n                                            {props.touched.subject && props.errors.subject &&\n                                            <span className=\"help-block text-danger\">{props.errors.subject}</span>}\n\n                                            <input\n                                                multiple={true}\n                                                type=\"file\"\n                                                name=\"file\"\n                                                onChange={(event) => {\n                                                    props.setFieldValue(\"media\", event.target.files[0]);\n                                                }}\n                                            />\n\n                                        </div>\n\n                                        <Modal.Footer>\n\n                                            <Button variant=\"secondary\" onClick={handleCloseTopic}>Close</Button>\n                                            <button type=\"submit\" className=\"btn btn-primary mb-2\">Create</button>\n\n                                        </Modal.Footer>\n                                    </Form>)}\n                            </Formik>\n\n                        </React.Fragment>\n\n                    </Modal.Body>\n\n\n                </Modal>\n\n            </div>\n        );\n    }\n}\nexport default withRouter(NewTopic);"]},"metadata":{},"sourceType":"module"}