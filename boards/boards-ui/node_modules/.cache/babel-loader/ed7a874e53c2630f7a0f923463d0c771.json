{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"axios\";import{Link,withRouter}from\"react-router-dom\";import{Button}from\"react-bootstrap\";import InfoModal from\"../InfoModal/infomodal\";import NewTopic from\"../NewTopic/newtopic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BoardDetail(_ref){var match=_ref.match;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),board=_useState2[0],Setboard=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),topics=_useState4[0],SetTopic=_useState4[1];var id=match.params.id;var tokens=localStorage.tokens;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showTopic=_useState6[0],setShowTopic=_useState6[1];var handleCloseTopic=function handleCloseTopic(){return setShowTopic(false);};var handleShowTopic=function handleShowTopic(){setShowTopic(true);};// console.log(match)\nuseEffect(function(){axios({method:\"GET\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json'},url:\"http://127.0.0.1:8000/api/board/\".concat(id,\"/\")}).then(function(response){Setboard(response.data);SetTopic(response.data.topics);});},[id,showTopic]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App mt-5\",children:[!tokens?null:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"success \",className:\"d-flex m-1 ml-2\",onClick:function onClick(){return handleShowTopic();},children:\"New Topic\"}),showTopic&&/*#__PURE__*/_jsx(NewTopic,{openTopic:showTopic,handleCloseTopic:handleCloseTopic})]}),topics.length?/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered m-1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Topic\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Starter\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Replies\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Views\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last Update\"})]})}),topics.map(function(t){return/*#__PURE__*/_jsx(\"tbody\",{className:\"infinite-item\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:!tokens?null:/*#__PURE__*/_jsx(Link,{className:\"link-success\",to:{pathname:\"/board/\".concat(board.id,\"/topic/\").concat(t.id,\"/\")},children:/*#__PURE__*/_jsx(\"p\",{className:\"h5\",children:t.subject})})})}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:t.starter}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:t.replies}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:t.views}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:t.last_updated})]})},t.id);})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center fs-3\",children:\"Content doesnt exist, create new topic\"})]});}export default withRouter(BoardDetail);","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/board_detail/BoardDetail.js"],"names":["React","useState","useEffect","axios","Link","withRouter","Button","InfoModal","NewTopic","BoardDetail","match","board","Setboard","topics","SetTopic","id","params","tokens","localStorage","showTopic","setShowTopic","handleCloseTopic","handleShowTopic","method","headers","url","then","response","data","length","map","t","pathname","subject","starter","replies","views","last_updated"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport {Button} from \"react-bootstrap\";\nimport InfoModal from \"../InfoModal/infomodal\";\nimport NewTopic from \"../NewTopic/newtopic\";\n\nfunction BoardDetail({ match }) {\n\n    const [board, Setboard] = useState({})\n    const [topics, SetTopic] = useState([])\n    const id = match.params.id\n    const tokens = localStorage.tokens;\n\n    const [showTopic, setShowTopic] = useState(false);\n    const handleCloseTopic = () => setShowTopic(false);\n    const handleShowTopic =() =>{\n      setShowTopic(true);}\n\n\n// console.log(match)\n    useEffect(() => {\n\n        axios({\n            method: \"GET\",\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept' : 'application/json',\n                'Content-Type': 'application/json'\n                },\n            url: `http://127.0.0.1:8000/api/board/${id}/`\n        }).then(response => {\n            Setboard(response.data)\n            SetTopic(response.data.topics)\n        })\n    }, [id, showTopic])\n\n    return(\n\n<div className=\"App mt-5\">\n {\n                          !tokens ? null : ( <>\n              <Button variant=\"success \" className=\"d-flex m-1 ml-2\" onClick={()=>handleShowTopic()} >New Topic</Button>\n  {showTopic && <NewTopic openTopic={showTopic}  handleCloseTopic={handleCloseTopic} />}\n  </>)\n                        }\n {topics.length ?\n\n     <table className=\"table table-bordered m-1\">\n\n        <thead>\n        <tr>\n      <th scope=\"col\">Topic</th>\n      <th scope=\"col\">Starter</th>\n      <th scope=\"col\">Replies</th>\n      <th scope=\"col\">Views</th>\n      <th scope=\"col\">Last Update</th>\n        </tr>\n        </thead>\n       {topics.map(t => (\n        <tbody className=\"infinite-item\" key={t.id}>\n        <tr>\n          <td>\n              <small className=\"text-muted d-block\">\n {\n   !tokens ? null : (\n<Link className=\"link-success\" to={{pathname:`/board/${board.id}/topic/${t.id}/` }}>\n    <p className=\"h5\">{t.subject}</p>\n    </Link>\n   )}\n              </small>\n          </td>\n          <td className=\"align-middle\">\n            {t.starter}\n          </td>\n          <td className=\"align-middle\">\n            {t.replies}\n          </td>\n          <td className=\"align-middle\">\n               {t.views}\n              </td>\n          <td className=\"align-middle\">\n           {t.last_updated}\n          </td>\n        </tr>\n        </tbody>\n           ))}\n      </table>\n     : <p className=\"text-center fs-3\">Content doesnt exist, create new topic</p>\n }\n</div>\n\n    )\n}\n\nexport default withRouter(BoardDetail);"]},"metadata":{},"sourceType":"module"}