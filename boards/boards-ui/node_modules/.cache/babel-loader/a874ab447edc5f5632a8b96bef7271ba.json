{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useCallback,useRef,useEffect}from\"react\";import styled from\"styled-components\";import ReactCrop from\"react-image-crop\";import\"react-image-crop/dist/ReactCrop.css\";import Uploady,{withRequestPreSendUpdate,useItemFinalizeListener}from\"@rpldy/uploady\";import{getMockSenderEnhancer}from\"@rpldy/mock-sender\";import UploadButton from\"@rpldy/upload-button\";import UploadPreview,{PREVIEW_TYPES}from\"@rpldy/upload-preview\";import cropImage from\"./crop\";import\"./style.css\";import Profile from\"./my_account\";import axios from\"axios\";import FormData from\"form-data\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledReactCrop=styled(ReactCrop)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-width: 900px;\\n  height: 400px;\\n\"])));var PreviewImage=styled.img(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin: 5px;\\n  max-width: 200px;\\n  height: auto;\\n  max-height: 200px;\\n\"])));var ButtonsWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  margin-top: 10px;\\n\"])));var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],Setuser=_useState2[1];var tokens=localStorage.tokens;useEffect(function(){axios({method:\"GET\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json'},url:\"http://127.0.0.1:8000/api/account/\"}).then(function(response){console.log(response.data);Setuser(response.data);});},[]);var handleSubmit=function handleSubmit(values){var data=new FormData();var _iterator=_createForOfIteratorHelper(values.file),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var file=_step.value;data.append(\"image\",file);}// data.append('file[]', values.file, values.file.name,);\n// data.append('subject', values.subject);\n}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(\"data\",data);console.log(\"values\",values.file.name);var REST_API_URL=\"http://127.0.0.1:8000/api/account/\";axios.post(REST_API_URL,data,{headers:{'accept':'application/json','Accept-Language':'en-US,en;q=0.8','Content-Type':\"multipart/form-data\",'Authorization':\"Token \".concat(tokens)}}).then(function(response){if(response.status===201){alert(\"Success\");// handleCloseTopic()\n}else{alert(\"error\");// handleCloseTopic()\n// window.location.reload();\nthrow new Error('Something went wrong');}});};var PreviewButtons=function PreviewButtons(props){var finished=props.finished,crop=props.crop,updateRequest=props.updateRequest,onUploadCancel=props.onUploadCancel,onUploadCrop=props.onUploadCrop;return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-content page-container ml-4 \",id:\"page-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"padding mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row container d-flex justify-content-center mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card user-card-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row m-l-0 m-r-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4 bg-c-lite-green user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-block text-center text-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-b-5\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/bubbles/100/000000/user.png\",className:\"img-radius\",alt:\"User-Profile-Image\"})}),/*#__PURE__*/_jsxs(ButtonsWrapper,{children:[/*#__PURE__*/_jsx(\"button\",{style:{display:!finished&&updateRequest&&crop?\"block\":\"none\"},onClick:onUploadCrop,children:\"Upload Cropped\"}),/*#__PURE__*/_jsx(\"button\",{style:{display:!finished&&updateRequest?\"block\":\"none\"},onClick:updateRequest,children:\"Upload without Crop\"}),/*#__PURE__*/_jsx(\"button\",{style:{display:!finished&&updateRequest&&crop?\"block\":\"none\"},onClick:handleSubmit,children:\"Cancel\"})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"f-w-600\",children:\" \"}),/*#__PURE__*/_jsx(\"p\",{children:\"Web \"}),\" \",/*#__PURE__*/_jsx(\"i\",{className:\" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16\",children:\" \"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-block\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"m-b-20 p-b-5 b-b-default f-w-600 mb-5\",children:\"Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-b-10 f-w-600\",children:\"Username\"}),/*#__PURE__*/_jsxs(\"h6\",{className:\"text-muted f-w-400\",children:[user.username,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-b-10 f-w-600\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"h6\",{className:\"text-muted f-w-400\",children:[user.email,\" \"]})]})]})]})})]})})})})})},user.id)});};var ItemPreviewWithCrop=withRequestPreSendUpdate(function(props){var id=props.id,url=props.url,isFallback=props.isFallback,type=props.type,updateRequest=props.updateRequest,requestData=props.requestData,previewMethods=props.previewMethods;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),finished=_useState4[0],setFinished=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),crop=_useState6[0],setCrop=_useState6[1];useItemFinalizeListener(function(){setFinished(true);},id);var onUploadCrop=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(updateRequest&&((crop===null||crop===void 0?void 0:crop.height)||(crop===null||crop===void 0?void 0:crop.width)))){_context.next=5;break;}_context.next=3;return cropImage(url,requestData.items[0].file,crop);case 3:requestData.items[0].file=_context.sent;updateRequest({items:requestData.items});case 5:case\"end\":return _context.stop();}}},_callee);})),[url,requestData,updateRequest,crop]);var onUploadCancel=useCallback(function(){var _previewMethods$curre;updateRequest(false);if((_previewMethods$curre=previewMethods.current)===null||_previewMethods$curre===void 0?void 0:_previewMethods$curre.clear){previewMethods.current.clear();}},[updateRequest,previewMethods]);return isFallback||type!==PREVIEW_TYPES.IMAGE?/*#__PURE__*/_jsx(PreviewImage,{src:url,alt:\"fallback img\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[requestData&&!finished?/*#__PURE__*/_jsx(StyledReactCrop,{src:url,crop:crop,onChange:setCrop,onComplete:setCrop}):/*#__PURE__*/_jsx(PreviewImage,{src:url,alt:\"uploading img\"}),/*#__PURE__*/_jsx(PreviewButtons,{finished:finished,crop:crop,updateRequest:updateRequest,onUploadCancel:onUploadCancel,onUploadCrop:onUploadCrop}),/*#__PURE__*/_jsx(\"p\",{children:finished?\"FINISHED\":\"\"})]});});var mockSenderEnhancer=getMockSenderEnhancer({delay:1500});export default function Profile2(){var previewMethodsRef=useRef();return/*#__PURE__*/_jsx(Uploady,{destination:{url:\"[upload-url]\"},enhancer:mockSenderEnhancer,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Hello React Uploady\"}),/*#__PURE__*/_jsx(UploadButton,{children:\"Upload Files\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(UploadPreview,{PreviewComponent:ItemPreviewWithCrop,previewComponentProps:{previewMethods:previewMethodsRef},previewMethodsRef:previewMethodsRef,fallbackUrl:\"https://icon-library.net/images/image-placeholder-icon/image-placeholder-icon-6.jpg\"})]})});}","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/account/my_account2.js"],"names":["React","useState","useCallback","useRef","useEffect","styled","ReactCrop","Uploady","withRequestPreSendUpdate","useItemFinalizeListener","getMockSenderEnhancer","UploadButton","UploadPreview","PREVIEW_TYPES","cropImage","Profile","axios","FormData","StyledReactCrop","PreviewImage","img","ButtonsWrapper","div","user","Setuser","tokens","localStorage","method","headers","url","then","response","console","log","data","handleSubmit","values","file","append","name","REST_API_URL","post","status","alert","Error","PreviewButtons","props","finished","crop","updateRequest","onUploadCancel","onUploadCrop","display","username","email","id","ItemPreviewWithCrop","isFallback","type","requestData","previewMethods","setFinished","setCrop","height","width","items","current","clear","IMAGE","mockSenderEnhancer","delay","Profile2","previewMethodsRef"],"mappings":"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","sourcesContent":["import React, {useState, useCallback, useRef, useEffect} from \"react\";\nimport styled from \"styled-components\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\nimport Uploady, {\n  withRequestPreSendUpdate,\n  useItemFinalizeListener\n} from \"@rpldy/uploady\";\nimport { getMockSenderEnhancer } from \"@rpldy/mock-sender\";\nimport UploadButton from \"@rpldy/upload-button\";\nimport UploadPreview, { PREVIEW_TYPES } from \"@rpldy/upload-preview\";\nimport cropImage from \"./crop\";\nimport \"./style.css\";\nimport Profile from \"./my_account\";\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n\n\n\nconst StyledReactCrop = styled(ReactCrop)`\n  width: 100%;\n  max-width: 900px;\n  height: 400px;\n`;\n\nconst PreviewImage = styled.img`\n  margin: 5px;\n  max-width: 200px;\n  height: auto;\n  max-height: 200px;\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 10px;\n`;\n    const [user, Setuser] = useState({})\n    const tokens = localStorage.tokens;\n    useEffect(() => {\n\n        axios({\n            method: \"GET\",\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept' : 'application/json',\n                'Content-Type': 'application/json'\n                },\n            url: `http://127.0.0.1:8000/api/account/`\n        }).then(response => {\n            console.log(response.data)\n            Setuser(response.data)\n        })\n    }, [])\n\n\n\nconst handleSubmit = (values) => {\n    let data = new FormData();\n    for(const file of values.file){\n        data.append(\"image\", file);\n    }\n     // data.append('file[]', values.file, values.file.name,);\n     // data.append('subject', values.subject);\n    console.log(\"data\", data)\n    console.log(\"values\", values.file.name)\n    const REST_API_URL = `http://127.0.0.1:8000/api/account/`;\n    axios.post(REST_API_URL, data, {\n  headers: {\n    'accept': 'application/json',\n    'Accept-Language': 'en-US,en;q=0.8',\n    'Content-Type': `multipart/form-data`,\n    'Authorization': `Token ${tokens}`,\n  }\n})\n  .then((response) => {\n      if (response.status===201) {\n          alert(\"Success\");\n            // handleCloseTopic()\n      }\n      else {\n          alert(\"error\");\n          // handleCloseTopic()\n          // window.location.reload();\n        throw new Error('Something went wrong');\n      }\n  });\n  }\n\n\n\n\n\nconst PreviewButtons = (props) => {\n\n  const { finished, crop, updateRequest, onUploadCancel, onUploadCrop } = props;\n\n  return (\n\n      <div className=\"container mt-5\">\n      <div className=\"page-content page-container ml-4 \" id=\"page-content\" key={user.id}>\n          <div className=\"padding mb-5\">\n              <div className=\"row container d-flex justify-content-center mb-5\">\n                  <div className=\"col-xl-6 col-md-12\">\n                      <div className=\"card user-card-full\">\n                          <div className=\"row m-l-0 m-r-0\">\n                              <div className=\"col-sm-4 bg-c-lite-green user-profile\">\n                                  <div className=\"card-block text-center text-white\">\n                                      <div className=\"m-b-5\">\n                                          <img\n                                          src=\"https://img.icons8.com/bubbles/100/000000/user.png\"\n                                          className=\"img-radius\" alt=\"User-Profile-Image\" />\n                                      </div>\n                                          <ButtonsWrapper>\n      <button\n        style={{\n          display: !finished && updateRequest && crop ? \"block\" : \"none\"\n        }}\n        onClick={onUploadCrop}\n      >\n        Upload Cropped\n      </button>\n      <button\n        style={{ display: !finished && updateRequest ? \"block\" : \"none\" }}\n        onClick={updateRequest}\n      >\n        Upload without Crop\n      </button>\n      <button\n        style={{\n          display: !finished && updateRequest && crop ? \"block\" : \"none\"\n        }}\n        onClick={handleSubmit}\n      >\n        Cancel\n      </button>\n    </ButtonsWrapper>\n                                      <h6 className=\"f-w-600\"> </h6>\n                                      <p>Web </p> <i\n                                      className=\" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16\"> </i>\n                                  </div>\n                              </div>\n                              <div className=\"col-sm-8\">\n                                  <div className=\"card-block\">\n                                      <h6 className=\"m-b-20 p-b-5 b-b-default f-w-600 mb-5\">Information</h6>\n                                      <div className=\"row\">\n                                          <div className=\"col-sm-6\">\n                                              <p className=\"m-b-10 f-w-600\">Username</p>\n                                              <h6 className=\"text-muted f-w-400\">{user.username} </h6>\n                                          </div>\n                                          <div className=\"col-sm-6\">\n                                              <p className=\"m-b-10 f-w-600\">Email</p>\n                                              <h6 className=\"text-muted f-w-400\">{user.email} </h6>\n                                          </div>\n                                      </div>\n                                  </div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n    </div>\n\n\n\n\n\n\n\n\n\n\n\n\n  );\n};\n\nconst ItemPreviewWithCrop = withRequestPreSendUpdate((props) => {\n  const {\n    id,\n    url,\n    isFallback,\n    type,\n    updateRequest,\n    requestData,\n    previewMethods\n  } = props;\n  const [finished, setFinished] = useState(false);\n  const [crop, setCrop] = useState(null);\n\n  useItemFinalizeListener(() => {\n    setFinished(true);\n  }, id);\n\n  const onUploadCrop = useCallback(async () => {\n    if (updateRequest && (crop?.height || crop?.width)) {\n      requestData.items[0].file = await cropImage(\n        url,\n        requestData.items[0].file,\n        crop\n      );\n      updateRequest({ items: requestData.items });\n    }\n  }, [url, requestData, updateRequest, crop]);\n\n  const onUploadCancel = useCallback(() => {\n    updateRequest(false);\n    if (previewMethods.current?.clear) {\n      previewMethods.current.clear();\n    }\n  }, [updateRequest, previewMethods]);\n\n  return isFallback || type !== PREVIEW_TYPES.IMAGE ? (\n    <PreviewImage src={url} alt=\"fallback img\" />\n  ) : (\n    <>\n      {requestData && !finished ? (\n        <StyledReactCrop\n          src={url}\n          crop={crop}\n          onChange={setCrop}\n          onComplete={setCrop}\n        />\n      ) : (\n        <PreviewImage src={url} alt=\"uploading img\" />\n      )}\n      <PreviewButtons\n        finished={finished}\n        crop={crop}\n        updateRequest={updateRequest}\n        onUploadCancel={onUploadCancel}\n        onUploadCrop={onUploadCrop}\n      />\n      <p>{finished ? \"FINISHED\" : \"\"}</p>\n    </>\n  );\n});\n\nconst mockSenderEnhancer = getMockSenderEnhancer({ delay: 1500 });\n\nexport default function Profile2() {\n  const previewMethodsRef = useRef();\n\n  return (\n    <Uploady\n      destination={{ url: \"[upload-url]\" }}\n      enhancer={mockSenderEnhancer}\n    >\n      <div className=\"App\">\n        <h1>Hello React Uploady</h1>\n        <UploadButton>Upload Files</UploadButton>\n        <br />\n        <UploadPreview\n          PreviewComponent={ItemPreviewWithCrop}\n          previewComponentProps={{ previewMethods: previewMethodsRef }}\n          previewMethodsRef={previewMethodsRef}\n          fallbackUrl=\"https://icon-library.net/images/image-placeholder-icon/image-placeholder-icon-6.jpg\"\n        />\n      </div>\n    </Uploady>\n  );\n}"]},"metadata":{},"sourceType":"module"}