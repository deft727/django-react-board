{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Link}from'react-router-dom';import{Redirect}from'react-router';import axios from'axios';import Cookies from'js-cookie';import ReactDOM from'react-dom';import Modal from'react-modal';import{Form}from\"formik\";import{Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function deleteboard(val){}function Table(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleShow=function handleShow(){return setShow(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center\",style:{height:\"100vh\"},children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleShow,children:\"Launch Form modal\"})}),/*#__PURE__*/_jsxs(Modal,{show:show,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Login Form\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",children:\"Close Modal\"})})]})]});var tokens=localStorage.tokens;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),boards=_useState4[0],SetBoards=_useState4[1];useEffect(function(){// let tokens = window.localStorage.getItem('tokens');\nconsole.log('tokens',Cookies.get('csrftoken'));axios({method:\"GET\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json','csrftoken':Cookies.get('csrftoken')},url:\"http://127.0.0.1:8000/api/board/\"}).then(function(response){SetBoards(response.data.results);});},[]);var deleteboard=function deleteboard(pk){axios({method:\"delete\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json'},url:\"http://127.0.0.1:8000/api/board/\".concat(pk,\"/\")}).then(function(response){// console.log(response)\nif(response.status===204){window.location.reload();// props.history.push(\"/\")\n}});};return/*#__PURE__*/_jsx(\"div\",{className:\"App mt-5\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered m-1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Board\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Topics\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Posts\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last Post\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"})]})}),boards.map(function(b){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:/*#__PURE__*/_jsx(Link,{className:\"link-success\",to:{pathname:\"/board/\".concat(b.id,\"/\"),froDashboard:false},children:b.name})})}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.topics_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.posts_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:/*#__PURE__*/_jsxs(\"small\",{children:[b.last_post.message,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"a\",{href:\"\",children:[\"By \",b.last_post.author]})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{type:\"button\",onClick:handleShow,className:\"btn btn-success\",children:\" Edit \"}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{type:\"button\",onClick:function onClick(){return deleteboard(\"\".concat(b.id));},className:\"btn btn-danger\",children:\"Delete\"})]})]})},b.id);})]})});}export default Table;","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/table/Table.js"],"names":["React","useState","useEffect","Link","Redirect","axios","Cookies","ReactDOM","Modal","Form","Button","deleteboard","val","Table","props","show","setShow","handleShow","height","tokens","localStorage","boards","SetBoards","console","log","get","method","headers","url","then","response","data","results","pk","status","window","location","reload","map","b","pathname","id","froDashboard","name","topics_count","posts_count","last_post","message","author"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {Link} from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport Cookies from 'js-cookie'\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport {Form} from \"formik\";\nimport {Button} from \"react-bootstrap\";\n\nfunction deleteboard(val) {\n\n}\nfunction Table(props) {\n\n  const [show, setShow] = useState(false);\n\n  const handleShow = () => setShow(true);\n\n  return (\n    <>\n      <div\n        className=\"d-flex align-items-center justify-content-center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Button variant=\"primary\" onClick={handleShow}>\n          Launch Form modal\n        </Button>\n      </div>\n      <Modal show={show}>\n        <Modal.Header closeButton>\n          <Modal.Title>Login Form</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <></>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\">Close Modal</Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n\n\n    const tokens = localStorage.tokens;\n\n    const [boards, SetBoards] = useState([])\n     useEffect(() => {\n            // let tokens = window.localStorage.getItem('tokens');\n            console.log('tokens', Cookies.get('csrftoken') )\n\n            axios({\n                method: \"GET\",\n                headers: {\n\n                    'Authorization': `Token ${tokens}`,\n                    'Accept' : 'application/json',\n                    'Content-Type': 'application/json',\n                    'csrftoken': Cookies.get('csrftoken'),\n                },\n                url: `http://127.0.0.1:8000/api/board/`\n            }).then(response => {\n                SetBoards(response.data.results)\n            })\n        }, []);\n\n    const deleteboard = (pk) => {\n        axios({\n            method: \"delete\",\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept': 'application/json',\n            },\n            url: `http://127.0.0.1:8000/api/board/${pk}/`\n        }).then((response)=> {\n            // console.log(response)\n            if (response.status === 204) {\n             window.location.reload();\n                // props.history.push(\"/\")\n            }\n    } )}\n\n        return (\n            <div className=\"App mt-5\">\n                <table className=\"table table-bordered m-1\">\n                    <thead>\n                    <tr>\n                        <th scope=\"col\">Board</th>\n                        <th scope=\"col\">Topics</th>\n                        <th scope=\"col\">Posts</th>\n                        <th scope=\"col\">Last Post</th>\n                        <th scope=\"col\">Edit</th>\n                    </tr>\n                    </thead>\n                    {boards.map(b => (\n                        <tbody key={b.id}>\n                        <tr>\n                            <td>\n                                <small className=\"text-muted d-block\">\n                          <Link className=\"link-success\" to={{pathname:`/board/${b.id}/`, froDashboard:false }}>{b.name}</Link>\n                                </small>\n                            </td>\n                            <td className=\"align-middle\">\n                                {b.topics_count}\n                            </td>\n                            <td className=\"align-middle\">\n                                {b.posts_count}\n                            </td>\n\n                            <td className=\"align-middle\">\n\n                                <small>\n                                    {b.last_post.message} <br/>\n                                    <a href=\"\">\n                                        By {b.last_post.author}\n                                    </a>\n                                </small>\n                            </td>\n                            <td>\n<Link  type=\"button\" onClick={handleShow}   className=\"btn btn-success\"> Edit </Link>&nbsp;\n<Link  type=\"button\" onClick={() => deleteboard(`${b.id}`)}  className=\"btn btn-danger\">Delete</Link>\n                            </td>\n                        </tr>\n                        </tbody>\n                    ))}\n                </table>\n            </div>\n        );\n\n}\n\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}