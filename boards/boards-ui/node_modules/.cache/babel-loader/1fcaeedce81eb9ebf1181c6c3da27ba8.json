{"ast":null,"code":"import _slicedToArray from \"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nimport useUploadyContext from \"./useUploadyContext\";\n\nvar useEventEffect = function useEventEffect(event, fn) {\n  var context = useUploadyContext();\n  var on = context.on,\n      off = context.off;\n  useEffect(function () {\n    on(event, fn);\n    return function () {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\n\nvar generateUploaderEventHookWithState = function generateUploaderEventHookWithState(event, stateCalculator) {\n  return function (fn, id) {\n    var _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        eventState = _useState2[0],\n        setEventState = _useState2[1];\n\n    var eventCallback = useCallback(function (eventObj) {\n      if (!id || eventObj.id === id) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        setEventState(stateCalculator.apply(void 0, [eventObj].concat(args)));\n\n        if (fn) {\n          fn.apply(void 0, [eventObj].concat(args));\n        }\n      }\n    }, [fn, id]);\n    useEventEffect(event, eventCallback);\n    return eventState;\n  };\n};\n\nvar generateUploaderEventHook = function generateUploaderEventHook(event) {\n  var canScope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return function (fn, id) {\n    var eventCallback = useCallback(function (eventObj) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      return fn && (!canScope || !id || eventObj.id === id) ? fn.apply(void 0, [eventObj].concat(args)) : undefined;\n    }, [fn, id]);\n    useEventEffect(event, eventCallback);\n  };\n};\n\nvar logWarning = function logWarning(condition, msg) {\n  if (!isProduction() && !condition) {\n    // eslint-disable-next-line no-console\n    console.warn(msg);\n  }\n};\n\nvar markAsUploadOptionsComponent = function markAsUploadOptionsComponent(Component) {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\n\nvar getIsUploadOptionsComponent = function getIsUploadOptionsComponent(Component) {\n  var _Component$target, _Component$render;\n\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\n};\n\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/node_modules/@rpldy/shared-ui/lib/esm/utils.js"],"names":["useEffect","useState","useCallback","isProduction","UPLOAD_OPTIONS_COMP","useUploadyContext","useEventEffect","event","fn","context","on","off","generateUploaderEventHookWithState","stateCalculator","id","eventState","setEventState","eventCallback","eventObj","args","generateUploaderEventHook","canScope","undefined","logWarning","condition","msg","console","warn","markAsUploadOptionsComponent","Component","getIsUploadOptionsComponent","_Component$target","_Component$render","target","render"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nimport useUploadyContext from \"./useUploadyContext\";\n\nconst useEventEffect = (event, fn) => {\n  const context = useUploadyContext();\n  const {\n    on,\n    off\n  } = context;\n  useEffect(() => {\n    on(event, fn);\n    return () => {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\n\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\n  const [eventState, setEventState] = useState(null);\n  const eventCallback = useCallback((eventObj, ...args) => {\n    if (!id || eventObj.id === id) {\n      setEventState(stateCalculator(eventObj, ...args));\n\n      if (fn) {\n        fn(eventObj, ...args);\n      }\n    }\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n  return eventState;\n};\n\nconst generateUploaderEventHook = (event, canScope = true) => (fn, id) => {\n  const eventCallback = useCallback((eventObj, ...args) => {\n    return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n};\n\nconst logWarning = (condition, msg) => {\n  if (!isProduction() && !condition) {\n    // eslint-disable-next-line no-console\n    console.warn(msg);\n  }\n};\n\nconst markAsUploadOptionsComponent = Component => {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\n\nconst getIsUploadOptionsComponent = Component => {\n  var _Component$target, _Component$render;\n\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\n};\n\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };"]},"metadata":{},"sourceType":"module"}