{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Link}from'react-router-dom';import{Redirect}from'react-router';import axios from'axios';import Cookies from'js-cookie';import ReactDOM from'react-dom';import{Button}from'react-bootstrap';import MyModal from\"../Modal/modal\";import BoardForm from\"../BoardForm/boardform\";import InfoModal from\"../InfoModal/ifomodal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function deleteboard(val){}function Table(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentBoard=_useState2[0],setCurrentBoard=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(bordId){console.log(bordId);setShow(true);setCurrentBoard(bordId);};var tokens=localStorage.tokens;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showBoard=_useState6[0],setShowBoard=_useState6[1];var handleCloseBoard=function handleCloseBoard(){return setShowBoard(false);};var handleShowBoard=function handleShowBoard(){setShowBoard(true);};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showInfo=_useState8[0],setShowInfo=_useState8[1];var handleCloseInfo=function handleCloseInfo(){return setShowInfo(false);};var handleShowInfo=function handleShowInfo(){setShowInfo(true);};var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),history=_useState10[0],SetHistory=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),boards=_useState12[0],SetBoards=_useState12[1];useEffect(function(){// let tokens = window.localStorage.getItem('tokens');\n// console.log('tokens', Cookies.get('csrftoken') )\naxios({method:\"GET\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json','csrftoken':Cookies.get('csrftoken')},url:\"http://127.0.0.1:8000/api/board/\"}).then(function(response){SetBoards(response.data.results);SetHistory(response.data.history);});},[]);var deleteboard=function deleteboard(pk){axios({method:\"delete\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json'},url:\"http://127.0.0.1:8000/api/board/\".concat(pk,\"/\")}).then(function(response){// console.log(response)\nif(response.status===204){window.location.reload();// props.history.push(\"/\")\n}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App mt-5\",children:[!tokens?null:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex p-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:function onClick(){return handleShowBoard();},children:\"New Board\"}),\" \\xA0\",/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return handleShowInfo(history);},children:\" Last info \"}),showBoard&&/*#__PURE__*/_jsx(BoardForm,{open:showBoard,handleCloseBoard:handleCloseBoard}),showInfo&&/*#__PURE__*/_jsx(InfoModal,{openInfo:showInfo,handleCloseInfo:handleCloseInfo})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered m-1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Board\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Topics\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Posts\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last Post\"}),!tokens?null:/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"})]})}),boards.map(function(b){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:!b.topics_count?/*#__PURE__*/_jsx(Link,{className:\"link-danger\",children:b.name}):/*#__PURE__*/_jsx(Link,{className:\"link-success\",to:{pathname:\"/board/\".concat(b.id,\"/\"),froDashboard:false},children:b.name})})}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.topics_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.posts_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:/*#__PURE__*/_jsxs(\"small\",{children:[b.last_post.message,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"a\",{href:\"\",children:[\"By \",b.last_post.author]})]})}),!tokens?null:/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){return handleShow(b);},children:\"Edit\"}),\" \\xA0 \\xA0\",/*#__PURE__*/_jsx(Link,{type:\"button\",onClick:function onClick(){return deleteboard(\"\".concat(b.id));},className:\"btn btn-danger\",children:\"Delete\"})]})]})},b.id);})]}),show&&/*#__PURE__*/_jsx(MyModal,{open:show,boarD:currentBoard,handleClose:handleClose})]});}export default Table;","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/table/Table.js"],"names":["React","useState","useEffect","Link","Redirect","axios","Cookies","ReactDOM","Button","MyModal","BoardForm","InfoModal","deleteboard","val","Table","props","currentBoard","setCurrentBoard","show","setShow","handleClose","handleShow","bordId","console","log","tokens","localStorage","showBoard","setShowBoard","handleCloseBoard","handleShowBoard","showInfo","setShowInfo","handleCloseInfo","handleShowInfo","history","SetHistory","boards","SetBoards","method","headers","get","url","then","response","data","results","pk","status","window","location","reload","map","b","topics_count","name","pathname","id","froDashboard","posts_count","last_post","message","author"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {Link} from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport Cookies from 'js-cookie'\nimport ReactDOM from 'react-dom';\nimport { Button } from 'react-bootstrap';\nimport MyModal from \"../Modal/modal\";\nimport BoardForm from \"../BoardForm/boardform\";\nimport InfoModal from \"../InfoModal/ifomodal\";\n\n\n\nfunction deleteboard(val) {\n}\nfunction Table(props) {\n  const [currentBoard, setCurrentBoard]  = useState(null);\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow =(bordId) =>{\n      console.log(bordId);\n      setShow(true);\n      setCurrentBoard(bordId);\n  }\nconst tokens = localStorage.tokens;\n\n\n  const [showBoard, setShowBoard] = useState(false);\n  const handleCloseBoard = () => setShowBoard(false);\n  const handleShowBoard =() =>{\n      setShowBoard(true);\n  }\n\n  const [showInfo, setShowInfo] = useState(false);\n  const handleCloseInfo = () => setShowInfo(false);\n  const handleShowInfo =() =>{\n      setShowInfo(true);\n  }\n\nconst [history, SetHistory] = useState([])\nconst [boards, SetBoards] = useState([])\n     useEffect(() => {\n            // let tokens = window.localStorage.getItem('tokens');\n            // console.log('tokens', Cookies.get('csrftoken') )\n            axios({\n                method: \"GET\",\n                headers: {\n                    'Authorization': `Token ${tokens}`,\n                    'Accept' : 'application/json',\n                    'Content-Type': 'application/json',\n                    'csrftoken': Cookies.get('csrftoken'),\n                },\n                url: `http://127.0.0.1:8000/api/board/`\n            }).then(response => {\n                SetBoards(response.data.results)\n                SetHistory(response.data.history)\n            })\n        }, []);\n\n    const deleteboard = (pk) => {\n        axios({\n            method: \"delete\",\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept': 'application/json',\n            },\n            url: `http://127.0.0.1:8000/api/board/${pk}/`\n        }).then((response)=> {\n            // console.log(response)\n            if (response.status === 204) {\n             window.location.reload();\n                // props.history.push(\"/\")\n            }\n    } )}\n\n        return (\n            <div className=\"App mt-5\">\n           {\n             !tokens ? null : ( <>\n<div className=\"d-flex p-2\">\n  <Button variant=\"success\" onClick={()=>handleShowBoard()}>New Board</Button> &nbsp;\n\n  <Button variant=\"secondary\" onClick={()=>handleShowInfo(history)}> Last info </Button>\n\n  {showBoard && <BoardForm open={showBoard}  handleCloseBoard={handleCloseBoard}/>}\n  {showInfo && <InfoModal openInfo={showInfo}  handleCloseInfo={handleCloseInfo}/>}\n\n  </div>\n             </>)\n                 }\n                <table className=\"table table-bordered m-1\">\n                    <thead>\n                    <tr>\n                        <th scope=\"col\">Board</th>\n                        <th scope=\"col\">Topics</th>\n                        <th scope=\"col\">Posts</th>\n                        <th scope=\"col\">Last Post</th>\n                        { !tokens ? null : (\n                        <th scope=\"col\">Edit</th>   )}\n                    </tr>\n                    </thead>\n                    {boards.map(b => (\n                        <tbody key={b.id}>\n                        <tr>\n                            <td>\n                                <small className=\"text-muted d-block\">\n                                    {\n                                !b.topics_count ? <Link className=\"link-danger\" >{b.name}</Link> : (\n                          <Link className=\"link-success\" to={{pathname:`/board/${b.id}/`, froDashboard:false }}>{b.name}</Link>\n                                    )\n                                    }\n                                </small>\n                            </td>\n                            <td className=\"align-middle\">\n                                {b.topics_count}\n                            </td>\n                            <td className=\"align-middle\">\n                                {b.posts_count}\n                            </td>\n\n                            <td className=\"align-middle\">\n\n                                <small>\n                                    {b.last_post.message} <br/>\n                                    <a href=\"\">\n                                        By {b.last_post.author}\n                                    </a>\n                                </small>\n                            </td>\n    { !tokens ? null : (\n                            <td>\n      <Button variant=\"primary\" onClick={()=>handleShow(b)} >\n        Edit\n      </Button> &nbsp; &nbsp;\n       <Link  type=\"button\" onClick={() => deleteboard(`${b.id}`)}  className=\"btn btn-danger\">Delete</Link>\n                            </td>     )}\n\n                        </tr>\n                        </tbody>\n                    ))}\n                </table>\n                {show && <MyModal open={show} boarD={currentBoard} handleClose={handleClose}/>}\n            </div>\n        );\n}\n\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}