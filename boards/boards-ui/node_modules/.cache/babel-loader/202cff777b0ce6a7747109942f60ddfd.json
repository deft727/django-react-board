{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import React,{useState}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Modal,Button}from'react-bootstrap';import{withFormik,Form,Field,Formik}from'formik';import*as Yup from\"yup\";import{withRouter}from\"react-router-dom\";import FormData from'form-data';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require('axios');function CropModal(props){var openTopic=props.openTopic,handleCloseTopic=props.handleCloseTopic,history=props.history,match=props.match;var id=match.params.id;var tokens=localStorage.tokens;var handleSubmit=function handleSubmit(values){var data=new FormData();var _iterator=_createForOfIteratorHelper(values.file),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var file=_step.value;data.append(\"image\",file);}// data.append('file[]', values.file, values.file.name,);\n// console.log(\"data\", data)\n}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(\"values\",values.file.name);var REST_API_URL=\"http://127.0.0.1:8000/account/\";axios.post(REST_API_URL,data,{headers:{'accept':'application/json','Accept-Language':'en-US,en;q=0.8','Content-Type':\"multipart/form-data\",'Authorization':\"Token \".concat(tokens)}}).then(function(response){if(response.status===201){alert(\"Success\");handleCloseTopic();}else{alert(\"error\");handleCloseTopic();// window.location.reload();\nthrow new Error('Something went wrong');}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{show:openTopic,onHide:handleCloseTopic,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\" New Topic \"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Formik// initialValues={{ subject: \"\" }}\n,{onSubmit:handleSubmit,children:function children(props){return/*#__PURE__*/_jsxs(Form,{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"m-2\",multiple:true,type:\"file\",name:\"file\",onChange:function onChange(event){props.setFieldValue(\"file\",event.target.files);}})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCloseTopic,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-2\",children:\"Update \"})]})]});}})})})]})});}export default withRouter(CropModal);","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/account/modalcrop.js"],"names":["React","useState","Modal","Button","withFormik","Form","Field","Formik","Yup","withRouter","FormData","axios","require","CropModal","props","openTopic","handleCloseTopic","history","match","id","params","tokens","localStorage","handleSubmit","values","data","file","append","console","log","name","REST_API_URL","post","headers","then","response","status","alert","Error","event","setFieldValue","target","files"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Modal, Button } from 'react-bootstrap'\nimport { withFormik, Form, Field, Formik } from 'formik';\nimport * as Yup from \"yup\";\nimport {withRouter} from \"react-router-dom\";\nimport FormData from 'form-data';\nconst axios = require('axios');\n\nfunction CropModal(props) {\n    const{openTopic,handleCloseTopic,history,match} = props;\n    const id = match.params.id\n    const tokens = localStorage.tokens;\n\n\n  const handleSubmit = (values) => {\n    let data = new FormData();\n    for(const file of values.file){\n        data.append(\"image\", file);\n    }\n     // data.append('file[]', values.file, values.file.name,);\n    // console.log(\"data\", data)\n    console.log(\"values\", values.file.name)\n    const REST_API_URL = `http://127.0.0.1:8000/account/`;\n    axios.post(REST_API_URL, data, {\n  headers: {\n    'accept': 'application/json',\n    'Accept-Language': 'en-US,en;q=0.8',\n    'Content-Type': `multipart/form-data`,\n    'Authorization': `Token ${tokens}`,\n  }\n})\n  .then((response) => {\n      if (response.status===201) {\n          alert(\"Success\");\n            handleCloseTopic()\n      }\n      else {\n          alert(\"error\");\n          handleCloseTopic()\n          // window.location.reload();\n        throw new Error('Something went wrong');\n      }\n  });\n  }\n  return (\n    <div>\n      <Modal show={openTopic} onHide={handleCloseTopic}>\n\n        <Modal.Header closeButton>\n          <Modal.Title> New Topic </Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n<React.Fragment>\n\n          <Formik\n       // initialValues={{ subject: \"\" }}\n       onSubmit={handleSubmit}\n     >\n       {props => (\n          <Form className=\"form-container\">\n            <div className=\"form-group\">\n               <input className=\"m-2\"\n              multiple={true}\n              type=\"file\"\n              name=\"file\"\n              onChange={(event) =>{\n                props.setFieldValue(\"file\", event.target.files);\n              }}\n            />\n            </div>\n\n        <Modal.Footer>\n\n          <Button variant=\"secondary\" onClick={handleCloseTopic}>Close</Button>\n                  <button type=\"submit\" className=\"btn btn-primary mb-2\">Update </button>\n\n        </Modal.Footer>\n          </Form>)}\n             </Formik>\n\n    </React.Fragment>\n\n        </Modal.Body>\n\n\n      </Modal>\n\n    </div>\n  );\n}\n\nexport default withRouter(CropModal);"]},"metadata":{},"sourceType":"module"}