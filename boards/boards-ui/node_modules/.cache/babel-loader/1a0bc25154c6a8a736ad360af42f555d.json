{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Link}from'react-router-dom';import{Redirect}from'react-router';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Table(){}var deleteboard=function deleteboard(){axios({method:\"delete\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json'},url:\"http://127.0.0.1:8000/api/board/\"}).then(function(response){if(response.status===204){// window.localStorage.removeItem(\"tokens\");\n// window.href=\"/\"\nprops.history.push(\"/\");}});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),boards=_useState2[0],SetBoards=_useState2[1];useEffect(function(){// let tokens = window.localStorage.getItem('tokens');\nvar tokens=localStorage.tokens;// console.log('tokens', tokens )\naxios({method:\"GET\",headers:{'Authorization':\"Token \".concat(tokens),'Accept':'application/json','Content-Type':'application/json'}// url: `http://127.0.0.1:8000/api/board/`\n}).then(function(response){SetBoards(response.data.results);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App mt-5\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered m-1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Board\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Topics\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Posts\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last Post\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"})]})}),boards.map(function(b){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:/*#__PURE__*/_jsx(Link,{className:\"link-success\",to:{pathname:\"/board/\".concat(b.id,\"/\"),froDashboard:false},children:b.name})})}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.topics_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:b.posts_count}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle\",children:/*#__PURE__*/_jsxs(\"small\",{children:[b.last_post.message,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"a\",{href:\"\",children:[\"By \",b.last_post.author]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{type:\"button\",to:{pathname:\"/board/delete/\".concat(b.id,\"/\"),froDashboard:false},onClick:deleteboard,className:\"btn btn-danger\",children:\"Delete\"})})]})},b.id);})]})});};export default Table;","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/table/Table.js"],"names":["React","useState","useEffect","Link","Redirect","axios","Table","deleteboard","method","headers","tokens","url","then","response","status","props","history","push","boards","SetBoards","localStorage","data","results","map","b","pathname","id","froDashboard","name","topics_count","posts_count","last_post","message","author"],"mappings":"kIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,sCAAP,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAGA,QAASC,CAAAA,KAAT,EAAiB,CAEhB,CACI,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAI,CAAEF,KAAK,CAAC,CACzBG,MAAM,CAAE,QADiB,CAGzBC,OAAO,CAAE,CACL,gCAA0BC,MAA1B,CADK,CAEL,SAAW,kBAFN,CAGL,eAAgB,kBAHX,CAHgB,CAQzBC,GAAG,mCARsB,CAAD,CAAL,CASpBC,IAToB,CASf,SAACC,QAAD,CAAa,CACjB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC7B;AACC;AACGC,KAAK,CAACC,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACR,CAf0B,EAgB7B,cAA4BhB,QAAQ,CAAC,EAAD,CAApC,wCAAOiB,MAAP,eAAeC,SAAf,eACCjB,SAAS,CAAC,UAAM,CACf;AACG,GAAMQ,CAAAA,MAAM,CAAGU,YAAY,CAACV,MAA5B,CACA;AAECL,KAAK,CAAC,CACFG,MAAM,CAAE,KADN,CAEFC,OAAO,CAAE,CACL,gCAA0BC,MAA1B,CADK,CAEL,SAAW,kBAFN,CAGL,eAAgB,kBAHX,CAKT;AAPE,CAAD,CAAL,CAQGE,IARH,CAQQ,SAAAC,QAAQ,CAAI,CAChBM,SAAS,CAACN,QAAQ,CAACQ,IAAT,CAAcC,OAAf,CAAT,CACH,CAVD,EAWH,CAhBO,CAgBL,EAhBK,CAAT,CAiBD,mBACE,YAAK,SAAS,CAAC,UAAf,uBACI,eAAO,SAAS,CAAC,0BAAjB,wBACI,oCACA,mCACI,WAAI,KAAK,CAAC,KAAV,mBADJ,cAEI,WAAI,KAAK,CAAC,KAAV,oBAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,mBAHJ,cAII,WAAI,KAAK,CAAC,KAAV,uBAJJ,cAKI,WAAI,KAAK,CAAC,KAAV,kBALJ,GADA,EADJ,CAUKJ,MAAM,CAACK,GAAP,CAAW,SAAAC,CAAC,qBACjB,oCACA,mCACE,iCACI,cAAO,SAAS,CAAC,oBAAjB,uBACT,KAAC,IAAD,EAAM,SAAS,CAAC,cAAhB,CAA+B,EAAE,CAAE,CAACC,QAAQ,kBAAWD,CAAC,CAACE,EAAb,KAAT,CAA6BC,YAAY,CAAC,KAA1C,CAAnC,UAAuFH,CAAC,CAACI,IAAzF,EADS,EADJ,EADF,cAME,WAAI,SAAS,CAAC,cAAd,UACGJ,CAAC,CAACK,YADL,EANF,cASE,WAAI,SAAS,CAAC,cAAd,UACGL,CAAC,CAACM,WADL,EATF,cAaE,WAAI,SAAS,CAAC,cAAd,uBAEE,yBACKN,CAAC,CAACO,SAAF,CAAYC,OADjB,kBAC0B,aAD1B,cAEE,WAAG,IAAI,CAAC,EAAR,iBACMR,CAAC,CAACO,SAAF,CAAYE,MADlB,GAFF,GAFF,EAbF,cAuBE,iCACI,KAAC,IAAD,EAAM,IAAI,CAAC,QAAX,CAAoB,EAAE,CAAE,CAACR,QAAQ,yBAAkBD,CAAC,CAACE,EAApB,KAAT,CAAoCC,YAAY,CAAC,KAAjD,CAAxB,CAAmF,OAAO,CAAEpB,WAA5F,CAAyG,SAAS,CAAC,gBAAnH,oBADJ,EAvBF,GADA,EAAYiB,CAAC,CAACE,EAAd,CADiB,EAAZ,CAVL,GADJ,EADF,CAgDD,CAlFI,CAqFL,cAAepB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {Link} from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\n\n\nfunction Table() {\n\n}\n     const deleteboard = ()=>{ axios({\n            method: \"delete\",\n\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept' : 'application/json',\n                'Content-Type': 'application/json'\n                },\n            url: `http://127.0.0.1:8000/api/board/`\n        }).then((response)=> {\n            if (response.status === 204) {\n            // window.localStorage.removeItem(\"tokens\");\n             // window.href=\"/\"\n                props.history.push(\"/\")\n            }\n    } )\n  const [boards, SetBoards] = useState([])\n   useEffect(() => {\n    // let tokens = window.localStorage.getItem('tokens');\n       const tokens = localStorage.tokens;\n       // console.log('tokens', tokens )\n\n        axios({\n            method: \"GET\",\n            headers: {\n                'Authorization': `Token ${tokens}`,\n                'Accept' : 'application/json',\n                'Content-Type': 'application/json'\n                },\n            // url: `http://127.0.0.1:8000/api/board/`\n        }).then(response => {\n            SetBoards(response.data.results)\n        })\n    }, [])\n  return (\n    <div className=\"App mt-5\">\n        <table className=\"table table-bordered m-1\">\n            <thead>\n            <tr>\n                <th scope=\"col\">Board</th>\n                <th scope=\"col\">Topics</th>\n                <th scope=\"col\">Posts</th>\n                <th scope=\"col\">Last Post</th>\n                <th scope=\"col\">Edit</th>\n            </tr>\n            </thead>\n            {boards.map(b => (\n        <tbody key={b.id}>\n        <tr>\n          <td>\n              <small className=\"text-muted d-block\">\n     <Link className=\"link-success\" to={{pathname:`/board/${b.id}/`, froDashboard:false }}>{b.name}</Link>\n              </small>\n          </td>\n          <td className=\"align-middle\">\n            {b.topics_count}\n          </td>\n          <td className=\"align-middle\">\n            {b.posts_count}\n          </td>\n\n          <td className=\"align-middle\">\n\n            <small>\n                {b.last_post.message} <br/>\n              <a href=\"\">\n                By {b.last_post.author}\n              </a>\n            </small>\n          </td>\n\n          <td>\n              <Link type=\"button\" to={{pathname:`/board/delete/${b.id}/`, froDashboard:false }}  onClick={deleteboard} className=\"btn btn-danger\">Delete</Link>\n          </td>\n\n        </tr>\n\n        </tbody>\n           ))}\n      </table>\n    </div>\n  );\n}\n\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}