{"ast":null,"code":"import _classCallCheck from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Form}from'semantic-ui-react';import{connect}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PicUploadNoCrop=/*#__PURE__*/function(_Component){_inherits(PicUploadNoCrop,_Component);var _super=_createSuper(PicUploadNoCrop);function PicUploadNoCrop(){var _this;_classCallCheck(this,PicUploadNoCrop);_this=_super.call(this);_this.handleFile=function(e){_this.setState({photoFile:e.target.files[0]});var file=e.target.files[0];var fileReader=new FileReader();fileReader.onloadend=function(){_this.setState({photoFile:file,photoUrl:fileReader.result});};if(file){fileReader.readAsDataURL(file);}};_this.handleSubmit=function(e){e.preventDefault();var formData=new FormData();formData.append('user[id]',_this.props.currentUser.id);formData.append('user[profile_pic]',_this.state.photoFile);// addPhotoToUser is an ajax call to save the picture in database\naddPhotoToUser(_this.props.currentUser,formData);};_this.state={photoFile:null,photoUrl:null};return _this;}_createClass(PicUploadNoCrop,[{key:\"render\",value:function render(){var preview=this.state.photoUrl?/*#__PURE__*/_jsx(\"img\",{src:this.state.photoUrl,alt:\"preview\"}):null;return/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"profile_pic\",value:this.state.profile_pic,onChange:this.handleFile}),preview,/*#__PURE__*/_jsx(\"button\",{children:\"save\"})]});}}]);return PicUploadNoCrop;}(Component);var mapSTP=function mapSTP(state){return{currentUser:state.currentUser};};export default connect(mapSTP)(PicUploadNoCrop);","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/account/my_account2.js"],"names":["React","Component","Form","connect","PicUploadNoCrop","handleFile","e","setState","photoFile","target","files","file","fileReader","FileReader","onloadend","photoUrl","result","readAsDataURL","handleSubmit","preventDefault","formData","FormData","append","props","currentUser","id","state","addPhotoToUser","preview","profile_pic","mapSTP"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OAASC,OAAT,KAAwB,aAAxB,C,2FAEMC,CAAAA,e,kHAEF,0BAAc,iDACV,wBADU,MAQdC,UARc,CAQD,SAAAC,CAAC,CAAI,CACd,MAAKC,QAAL,CAAc,CAACC,SAAS,CAAEF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAZ,CAAd,EACA,GAAMC,CAAAA,IAAI,CAAGL,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb,CACA,GAAME,CAAAA,UAAU,CAAG,GAAIC,CAAAA,UAAJ,EAAnB,CACAD,UAAU,CAACE,SAAX,CAAuB,UAAM,CACzB,MAAKP,QAAL,CAAc,CAACC,SAAS,CAAEG,IAAZ,CAAkBI,QAAQ,CAAEH,UAAU,CAACI,MAAvC,CAAd,EACH,CAFD,CAGA,GAAGL,IAAH,CAAS,CACLC,UAAU,CAACK,aAAX,CAAyBN,IAAzB,EACH,CACJ,CAlBa,OAoBdO,YApBc,CAoBC,SAAAZ,CAAC,CAAI,CAChBA,CAAC,CAACa,cAAF,GACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4B,MAAKC,KAAL,CAAWC,WAAX,CAAuBC,EAAnD,EACAL,QAAQ,CAACE,MAAT,CAAgB,mBAAhB,CAAqC,MAAKI,KAAL,CAAWlB,SAAhD,EACA;AACAmB,cAAc,CAAC,MAAKJ,KAAL,CAAWC,WAAZ,CAAyBJ,QAAzB,CAAd,CACH,CA3Ba,CAEV,MAAKM,KAAL,CAAa,CACTlB,SAAS,CAAE,IADF,CAETO,QAAQ,CAAE,IAFD,CAAb,CAFU,aAMb,C,kDAuBD,iBAAS,CACL,GAAMa,CAAAA,OAAO,CAAG,KAAKF,KAAL,CAAWX,QAAX,cAAsB,YAAK,GAAG,CAAE,KAAKW,KAAL,CAAWX,QAArB,CAA+B,GAAG,CAAC,SAAnC,EAAtB,CAAuE,IAAvF,CAEA,mBACI,MAAC,IAAD,EAAM,QAAQ,CAAE,KAAKG,YAArB,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,aAAtB,CAAoC,KAAK,CAAE,KAAKQ,KAAL,CAAWG,WAAtD,CACA,QAAQ,CAAE,KAAKxB,UADf,EADJ,CAGKuB,OAHL,cAII,gCAJJ,GADJ,CAQH,C,6BA1CyB3B,S,EA6C9B,GAAM6B,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAJ,KAAK,CAAI,CACpB,MAAO,CAACF,WAAW,CAAEE,KAAK,CAACF,WAApB,CAAP,CACH,CAFD,CAIA,cAAerB,CAAAA,OAAO,CAAC2B,MAAD,CAAP,CAAgB1B,eAAhB,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Form } from 'semantic-ui-react'\nimport { connect } from 'react-redux'\n\nclass PicUploadNoCrop extends Component {\n\n    constructor() {\n        super()\n        this.state = {\n            photoFile: null,\n            photoUrl: null\n        }\n    }\n\n    handleFile = e => {\n        this.setState({photoFile: e.target.files[0]})\n        const file = e.target.files[0]\n        const fileReader = new FileReader()\n        fileReader.onloadend = () => {\n            this.setState({photoFile: file, photoUrl: fileReader.result})\n        }\n        if(file) {\n            fileReader.readAsDataURL(file)\n        }\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        const formData = new FormData()\n        formData.append('user[id]', this.props.currentUser.id)\n        formData.append('user[profile_pic]', this.state.photoFile)\n        // addPhotoToUser is an ajax call to save the picture in database\n        addPhotoToUser(this.props.currentUser, formData)\n    }\n\n    render() {\n        const preview = this.state.photoUrl ? <img src={this.state.photoUrl} alt='preview'/> : null\n\n        return (\n            <Form onSubmit={this.handleSubmit}>\n                <input type='file' id='profile_pic' value={this.state.profile_pic}\n                onChange={this.handleFile} />\n                {preview}\n                <button>save</button>\n            </Form>\n        )\n    }\n}\n\nconst mapSTP = state => {\n    return {currentUser: state.currentUser}\n}\n\nexport default connect(mapSTP)(PicUploadNoCrop)"]},"metadata":{},"sourceType":"module"}