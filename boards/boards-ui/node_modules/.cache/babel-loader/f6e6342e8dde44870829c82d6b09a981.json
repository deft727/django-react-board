{"ast":null,"code":"import React,{useState}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Modal,Button}from'react-bootstrap';import{withFormik,Form,Field,Formik}from'formik';import*as Yup from\"yup\";import{withRouter}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var express=require('express');var app=express();function NewTopic(props){var openTopic=props.openTopic,handleCloseTopic=props.handleCloseTopic,history=props.history,match=props.match;var id=match.params.id;var tokens=localStorage.tokens;var validationSchema=Yup.object().shape({subject:Yup.string().required('subject is wrong')},[id]);var handleSubmit=function handleSubmit(values){var data=new FormData();data.append(\"file\",values.file,values.subject);var bnd=null;// console.log(\"data\", data)\nconsole.log(\"values\",values);var REST_API_URL=\"http://127.0.0.1:8000/api/board/\".concat(id,\"/new/\");app.post(\"\".concat(REST_API_URL),function(req,res){res.download(values.file.name);});// fetch(REST_API_URL, {\n//       mode: 'no-cors',\n//       headers: {\n//         'Authorization': `Token ${tokens}`,\n//         'Content-Type': `multipart/form-data; boundary=${bnd}`,\n//\n//         },\n//       method: \"post\",\n//       body:  data\n// }).then(function (response) {\n//   if (response.ok) {\n//     console.log(response)\n//   } else if (response.status === 400) {\n//     alert(\"BAD_REQUEST! \");\n//   }\n// }, function (e) {\n//   alert(\"Error submitting form!\");\n// });\n};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{show:openTopic,onHide:handleCloseTopic,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\" New Topic \"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{subject:\"\"},onSubmit:handleSubmit,validationSchema:validationSchema,children:function children(props){return/*#__PURE__*/_jsxs(Form,{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"subject\"}),/*#__PURE__*/_jsx(Field,{type:\"text\",name:\"subject\",id:\"subject\",className:\"form-control \",placeholder:\"subject\"}),props.touched.subject&&props.errors.subject&&/*#__PURE__*/_jsx(\"span\",{className:\"help-block text-danger\",children:props.errors.subject}),/*#__PURE__*/_jsx(\"input\",{multiple:true,type:\"file\",name:\"file\",onChange:function onChange(event){props.setFieldValue(\"file\",event.target.files[0]);}})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCloseTopic,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-2\",children:\"Create \"})]})]});}})})})]})});}export default withRouter(NewTopic);","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/NewTopic/newtopic.js"],"names":["React","useState","Modal","Button","withFormik","Form","Field","Formik","Yup","withRouter","express","require","app","NewTopic","props","openTopic","handleCloseTopic","history","match","id","params","tokens","localStorage","validationSchema","object","shape","subject","string","required","handleSubmit","values","data","FormData","append","file","bnd","console","log","REST_API_URL","post","req","res","download","name","touched","errors","event","setFieldValue","target","files"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Modal, Button } from 'react-bootstrap'\nimport { withFormik, Form, Field, Formik } from 'formik';\nimport * as Yup from \"yup\";\nimport {withRouter} from \"react-router-dom\";\n\nvar express = require('express');\nvar app = express();\nfunction NewTopic(props) {\n    const{openTopic,handleCloseTopic,history,match} = props;\n    const id = match.params.id\n    const tokens = localStorage.tokens;\n    const  validationSchema = Yup.object().shape({\n    subject: Yup.string().required('subject is wrong'),\n  }, [id])\n\n\n  const handleSubmit = (values) => {\n    let data = new FormData();\n       data.append(\n            \"file\",\n            values.file,\n           values.subject\n        );\n       let bnd =null;\n    // console.log(\"data\", data)\n    console.log(\"values\", values)\n    const REST_API_URL = `http://127.0.0.1:8000/api/board/${id}/new/`;\n\n        app.post(`${REST_API_URL}`, function(req, res){\n            res.download(values.file.name);\n        });\n    // fetch(REST_API_URL, {\n    //       mode: 'no-cors',\n    //       headers: {\n    //         'Authorization': `Token ${tokens}`,\n    //         'Content-Type': `multipart/form-data; boundary=${bnd}`,\n    //\n    //         },\n    //       method: \"post\",\n    //       body:  data\n    // }).then(function (response) {\n    //   if (response.ok) {\n    //     console.log(response)\n    //   } else if (response.status === 400) {\n    //     alert(\"BAD_REQUEST! \");\n    //   }\n    // }, function (e) {\n    //   alert(\"Error submitting form!\");\n    // });\n  }\n  return (\n    <div>\n      <Modal show={openTopic} onHide={handleCloseTopic}>\n\n        <Modal.Header closeButton>\n          <Modal.Title> New Topic </Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n<React.Fragment>\n\n          <Formik\n       initialValues={{ subject: \"\" }}\n       onSubmit={handleSubmit}\n       validationSchema={validationSchema}\n     >\n       {props => (\n          <Form className=\"form-container\">\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">subject</label>\n              <Field type=\"text\" name=\"subject\" id={\"subject\"} className={\"form-control \"} placeholder=\"subject\" />\n              { props.touched.subject && props.errors.subject && <span className=\"help-block text-danger\">{props.errors.subject}</span> }\n\n               <input\n              multiple={true}\n              type=\"file\"\n              name=\"file\"\n              onChange={(event) =>{\n                props.setFieldValue(\"file\", event.target.files[0]);\n              }}\n            />\n\n            </div>\n\n        <Modal.Footer>\n\n          <Button variant=\"secondary\" onClick={handleCloseTopic}>Close</Button>\n                  <button type=\"submit\" className=\"btn btn-primary mb-2\">Create </button>\n\n        </Modal.Footer>\n          </Form>)}\n             </Formik>\n\n    </React.Fragment>\n\n        </Modal.Body>\n\n\n      </Modal>\n\n    </div>\n  );\n}\n\nexport default withRouter(NewTopic);"]},"metadata":{},"sourceType":"module"}