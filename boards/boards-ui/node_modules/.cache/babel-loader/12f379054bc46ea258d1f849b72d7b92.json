{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{PureComponent,useState}from\"react\";import Button from\"@material-ui/core/Button\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Slide from\"@material-ui/core/Slide\";import ReactCrop from\"react-image-crop\";import\"react-image-crop/dist/ReactCrop.css\";import{withStyles}from\"@material-ui/styles\";import FormData from\"form-data\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require('axios');var tokens=localStorage.tokens;//  const handleSubmit = (values) => {\n//     let data = new FormData();\n//     data.append(\"image\", values.file);\n//      // data.append('file[]', values.file, values.file.name,);\n//      // data.append('subject', values.subject);\n//     console.log(\"data\", data)\n//     console.log(\"values\", values.file.name)\n//     const REST_API_URL = `http://127.0.0.1:8000/api/account/`;\n//     axios.post(REST_API_URL, data, {\n//   headers: {\n//     'accept': 'application/json',\n//     'Accept-Language': 'en-US,en;q=0.8',\n//     'Content-Type': `multipart/form-data`,\n//     'Authorization': `Token ${tokens}`,\n//\n//   }\n// })\n//   .then((response) => {\n//       if (response.status===201) {\n//           alert(\"Success\");\n//             // handleCloseTopic()\n//       }\n//       else {\n//           alert(\"error\");\n//           // handleCloseTopic()\n//           // window.location.reload();\n//         throw new Error('Something went wrong');\n//       }\n//   });\n//   }\nvar Transition=/*#__PURE__*/React.forwardRef(function Transition(props,ref){return/*#__PURE__*/_jsx(Slide,_objectSpread({direction:\"up\",ref:ref},props));});var styles={dialogPaper:{minHeight:\"80vh\",maxHeight:\"80vh\"}};var AlertDialogSlide=/*#__PURE__*/function(_PureComponent){_inherits(AlertDialogSlide,_PureComponent);var _super=_createSuper(AlertDialogSlide);function AlertDialogSlide(){var _this;_classCallCheck(this,AlertDialogSlide);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={open:false,src:null,crop:{unit:\"%\",width:30,aspect:16/9}};_this.handleSubmit=function(values){// let data = new FormData();\n// data.append(\"image\", values.file);\n// data.append('file[]', values.file, values.file.name,);\n// data.append('subject', values.subject);\n// console.log(imagecrop)\nconsole.log(\"data\",values);};_this.handleClickOpen=function(){_this.setState({open:true});};_this.handleClose=function(){_this.setState({open:false});};_this.onSelectFile=function(e){if(e.target.files&&e.target.files.length>0){var reader=new FileReader();reader.addEventListener(\"load\",function(){return _this.setState({src:reader.result});});reader.readAsDataURL(e.target.files[0]);}};_this.onImageLoaded=function(image){_this.imageRef=image;};_this.onCropComplete=function(crop){_this.makeClientCrop(crop);};_this.onCropChange=function(crop,percentCrop){// You could also use percentCrop:\n// this.setState({ crop: percentCrop });\n_this.setState({crop:crop});};return _this;}_createClass(AlertDialogSlide,[{key:\"makeClientCrop\",value:function(){var _makeClientCrop=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(crop){var croppedImageUrl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.imageRef&&crop.width&&crop.height)){_context.next=5;break;}_context.next=3;return this.getCroppedImg(this.imageRef,crop,\"newFile.jpeg\");case 3:croppedImageUrl=_context.sent;this.setState({croppedImageUrl:croppedImageUrl});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function makeClientCrop(_x){return _makeClientCrop.apply(this,arguments);}return makeClientCrop;}()},{key:\"getCroppedImg\",value:function getCroppedImg(image,crop,fileName){var _this2=this;var canvas=document.createElement(\"canvas\");var scaleX=image.naturalWidth/image.width;var scaleY=image.naturalHeight/image.height;canvas.width=crop.width;canvas.height=crop.height;var ctx=canvas.getContext(\"2d\");ctx.drawImage(image,crop.x*scaleX,crop.y*scaleY,crop.width*scaleX,crop.height*scaleY,0,0,crop.width,crop.height);return new Promise(function(resolve,reject){canvas.toBlob(function(blob){if(!blob){//reject(new Error('Canvas is empty'));\nconsole.error(\"Canvas is empty\");return;}blob.name=fileName;window.URL.revokeObjectURL(_this2.fileUrl);_this2.fileUrl=window.URL.createObjectURL(blob);//\nvar file=new File([blob],\"filename\");//\nvar data=new FormData();data.append(\"image\",file);window.localStorage.setItem('file',file);console.log(file);resolve(_this2.fileUrl);},\"image/jpeg\");});}},{key:\"render\",value:function render(){var _this3=this;var fileInput=/*#__PURE__*/React.createRef();var _this$state=this.state,crop=_this$state.crop,croppedImageUrl=_this$state.croppedImageUrl,src=_this$state.src;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:this.handleClickOpen,children:\"Add Images\"}),/*#__PURE__*/_jsxs(Dialog,{open:this.state.open,TransitionComponent:Transition,keepMounted:true,onClose:this.TransitionComponenthandleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add Images\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInput,style:{display:\"none\"},onChange:this.onSelectFile,multiple:true}),src&&/*#__PURE__*/_jsx(ReactCrop,{src:src,crop:crop,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),croppedImageUrl&&/*#__PURE__*/_jsx(\"img\",{alt:\"Crop\",style:{maxWidth:\"100%\"},src:croppedImageUrl})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:this.handleClose,color:\"primary\",children:\"close\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return fileInput.current.click();},children:src===null?\"Upload Photo\":\"Change Photo\"}),src!==null?/*#__PURE__*/ //\n_jsx(Button,{onClick:function onClick(){return _this3.handleSubmit();},children:\"Save Photo\"})//\n:null]})]})]});}}]);return AlertDialogSlide;}(PureComponent);export default AlertDialogSlide;","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/account/Dialog.js"],"names":["React","PureComponent","useState","Button","Dialog","DialogActions","DialogContent","DialogTitle","Slide","ReactCrop","withStyles","FormData","axios","require","tokens","localStorage","Transition","forwardRef","props","ref","styles","dialogPaper","minHeight","maxHeight","AlertDialogSlide","state","open","src","crop","unit","width","aspect","handleSubmit","values","console","log","handleClickOpen","setState","handleClose","onSelectFile","e","target","files","length","reader","FileReader","addEventListener","result","readAsDataURL","onImageLoaded","image","imageRef","onCropComplete","makeClientCrop","onCropChange","percentCrop","height","getCroppedImg","croppedImageUrl","fileName","canvas","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","error","name","window","URL","revokeObjectURL","fileUrl","createObjectURL","file","File","data","append","setItem","fileInput","createRef","TransitionComponenthandleClose","display","maxWidth","current","click"],"mappings":"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","sourcesContent":["import React, { PureComponent , useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\nimport { withStyles } from \"@material-ui/styles\";\nimport FormData from \"form-data\";\n\nconst axios = require('axios');\n\nconst tokens = localStorage.tokens;\n\n//  const handleSubmit = (values) => {\n//     let data = new FormData();\n//     data.append(\"image\", values.file);\n//      // data.append('file[]', values.file, values.file.name,);\n//      // data.append('subject', values.subject);\n//     console.log(\"data\", data)\n//     console.log(\"values\", values.file.name)\n//     const REST_API_URL = `http://127.0.0.1:8000/api/account/`;\n//     axios.post(REST_API_URL, data, {\n//   headers: {\n//     'accept': 'application/json',\n//     'Accept-Language': 'en-US,en;q=0.8',\n//     'Content-Type': `multipart/form-data`,\n//     'Authorization': `Token ${tokens}`,\n//\n//   }\n// })\n//   .then((response) => {\n//       if (response.status===201) {\n//           alert(\"Success\");\n//             // handleCloseTopic()\n//       }\n//       else {\n//           alert(\"error\");\n//           // handleCloseTopic()\n//           // window.location.reload();\n//         throw new Error('Something went wrong');\n//       }\n//   });\n//   }\n\n\n\n\n\n\n\n\n\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst styles = {\n  dialogPaper: {\n    minHeight: \"80vh\",\n    maxHeight: \"80vh\"\n  }\n};\n\nclass AlertDialogSlide extends PureComponent {\n  state = {\n    open: false,\n    src: null,\n    crop: {\n      unit: \"%\",\n      width: 30,\n      aspect: 16 / 9\n    }\n  };\n\n\n\n    handleSubmit = (values) => {\n\n        // let data = new FormData();\n        // data.append(\"image\", values.file);\n         // data.append('file[]', values.file, values.file.name,);\n         // data.append('subject', values.subject);\n      // console.log(imagecrop)\n        console.log(\"data\", values)}\n        // console.log(\"values\", values.file.name)\n    //     const REST_API_URL = `http://127.0.0.1:8000/api/account/`;\n    //     axios.post(REST_API_URL, data, {\n    //   headers: {\n    //     'accept': 'application/json',\n    //     'Accept-Language': 'en-US,en;q=0.8',\n    //     'Content-Type': `multipart/form-data`,\n    //     'Authorization': `Token ${tokens}`,\n    //\n    //   }\n    // })\n    //   .then((response) => {\n    //       if (response.status===201) {\n    //           alert(\"Success\");\n    //             // handleCloseTopic()\n    //       }\n    //       else {\n    //           alert(\"error\");\n    //           // handleCloseTopic()\n    //           // window.location.reload();\n    //         throw new Error('Something went wrong');\n    //       }\n    //   });\n    //   }\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  onSelectFile = e => {\n    if (e.target.files && e.target.files.length > 0) {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () =>\n        this.setState({ src: reader.result })\n      );\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  };\n\n  // If you setState the crop in here you should return false.\n  onImageLoaded = image => {\n    this.imageRef = image;\n  };\n\n  onCropComplete = crop => {\n    this.makeClientCrop(crop);\n  };\n\n  onCropChange = (crop, percentCrop) => {\n    // You could also use percentCrop:\n    // this.setState({ crop: percentCrop });\n    this.setState({ crop });\n  };\n\n  async makeClientCrop(crop) {\n    if (this.imageRef && crop.width && crop.height) {\n      const croppedImageUrl = await this.getCroppedImg(\n        this.imageRef,\n        crop,\n        \"newFile.jpeg\"\n      );\n      this.setState({ croppedImageUrl });\n    }\n  }\n\n  getCroppedImg(image, crop, fileName) {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n\n\n    return new Promise((resolve, reject) =>  {\n      canvas.toBlob(blob => {\n        if (!blob) {\n          //reject(new Error('Canvas is empty'));\n          console.error(\"Canvas is empty\");\n          return;\n        }\n        blob.name = fileName;\n        window.URL.revokeObjectURL(this.fileUrl);\n        this.fileUrl = window.URL.createObjectURL(blob);\n        //\n        const file = new File([blob], \"filename\")\n        //\n        const data = new FormData();\n        data.append(\"image\", file);\n\n        window.localStorage.setItem('file', file);\n        console.log(file)\n        resolve(this.fileUrl);\n      }, \"image/jpeg\");\n    });\n  }\n\n\n\n\n  render() {\n    let fileInput = React.createRef();\n    const { crop, croppedImageUrl, src } = this.state;\n    return (\n      <div>\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={this.handleClickOpen}\n        >\n          Add Images\n        </Button>\n        <Dialog\n          open={this.state.open}\n          TransitionComponent={Transition}\n          keepMounted\n          onClose={this.TransitionComponenthandleClose}\n        >\n\n          <DialogTitle>{\"Add Images\"}</DialogTitle>\n          <DialogContent>\n            <input\n              type=\"file\"\n              ref={fileInput}\n              style={{ display: \"none\" }}\n              onChange={this.onSelectFile}\n              multiple\n            />\n\n            {src && (\n              <ReactCrop\n                src={src}\n                crop={crop}\n                onImageLoaded={this.onImageLoaded}\n                onComplete={this.onCropComplete}\n                onChange={this.onCropChange}\n              />\n            )}\n            {croppedImageUrl && (\n              <img\n                alt=\"Crop\"\n                style={{ maxWidth: \"100%\" }}\n                src={croppedImageUrl}\n              />\n            )}\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose} color=\"primary\">\n              close\n            </Button>\n            <Button onClick={() => fileInput.current.click()}>\n              {src === null ? \"Upload Photo\" : \"Change Photo\"}\n            </Button>\n            {src !== null ? (\n\n              //\n\n              <Button    onClick={()=> this.handleSubmit()}     >\n                Save Photo\n              </Button>\n\n\n            //\n\n\n            ) : null}\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default AlertDialogSlide;\n"]},"metadata":{},"sourceType":"module"}