{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/react_board/boards/boards-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"axios\";import{Link}from\"react-router-dom\";import Carousel from'react-bootstrap/Carousel';import{Button}from\"react-bootstrap\";import NewTopic from\"../NewTopic/newtopic\";import NewPost from\"../NewPost/newpost\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TopicDetail(_ref){var match=_ref.match;var tokens=localStorage.tokens;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),topic=_useState2[0],SetTopic=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],SetPosts=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),images=_useState6[0],SetImage=_useState6[1];var id=match.params.id;var pk=match.params.pk;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPost=_useState8[0],setShowPost=_useState8[1];var handleClosePost=function handleClosePost(){return setShowPost(false);};var handleShowPost=function handleShowPost(){setShowPost(true);};useEffect(function(){axios({method:\"GET\",url:\"http://127.0.0.1:8000/api/board/\".concat(id,\"/topic/\").concat(pk,\"/\")}).then(function(response){SetTopic(response.data);SetPosts(response.data.posts);SetImage(response.data.photos);});},[id,showPost]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App bordered mt-3 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsx(Carousel,{children:images.map(function(i){return/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block\",src:i.file,alt:\"First slide\"})});})})})})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered m-2\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[!tokens?null:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{placement:\"right\",variant:\"btn btn-primary mt-2\",onClick:function onClick(){return handleShowPost();},children:\"New Post\"}),showPost&&/*#__PURE__*/_jsx(NewPost,{openPost:showPost,handleClosePost:handleClosePost})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Post\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Time\"})]})]}),posts.map(function(p){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"th\",{children:p.created_by}),/*#__PURE__*/_jsx(\"td\",{className:\"col-sm-3\",children:p.message}),/*#__PURE__*/_jsx(\"td\",{children:p.created_at})]})},\"{p.id}\");})]})]});}export default TopicDetail;","map":{"version":3,"sources":["/home/user/Desktop/react_board/boards/boards-ui/src/components/topic_detail/Topic.js"],"names":["React","useState","useEffect","axios","Link","Carousel","Button","NewTopic","NewPost","TopicDetail","match","tokens","localStorage","topic","SetTopic","posts","SetPosts","images","SetImage","id","params","pk","showPost","setShowPost","handleClosePost","handleShowPost","method","url","then","response","data","photos","map","i","file","p","created_by","message","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport {Link} from \"react-router-dom\";\nimport Carousel from 'react-bootstrap/Carousel'\nimport {Button} from \"react-bootstrap\";\nimport NewTopic from \"../NewTopic/newtopic\";\nimport NewPost from \"../NewPost/newpost\";\n\nfunction TopicDetail({ match }) {\n    const tokens = localStorage.tokens;\n    const [topic, SetTopic] = useState({})\n    const [posts, SetPosts] = useState([])\n    const [images, SetImage] = useState([])\n    const id = match.params.id\n    const pk = match.params.pk\n    const [showPost, setShowPost] = useState(false);\n    const handleClosePost = () => setShowPost(false);\n    const handleShowPost =() =>{\n      setShowPost(true);}\n\n\n    useEffect(() => {\n        axios({\n            method: \"GET\",\n            url: `http://127.0.0.1:8000/api/board/${id}/topic/${pk}/`\n        }).then(response => {\n            SetTopic(response.data)\n            SetPosts(response.data.posts)\n            SetImage(response.data.photos)\n        })\n    }, [id,showPost])\n    return(\n\n\n<div className=\"App bordered mt-3 \">\n\n    <div className=\"d-flex justify-content-center\">\n        <div className=\"row\">\n            <div className=\"col-sm\">\n <Carousel>\n   {images.map(i => (\n  <Carousel.Item>\n    <img\n\n      className=\"d-block\"\n      src={i.file}\n      alt=\"First slide\"\n    />\n  </Carousel.Item>\n\n       ))}\n</Carousel>\n</div>\n  </div>\n\n</div>\n           <table className=\"table table-bordered m-2\">\n\n               <thead>\n                             {\n                          !tokens ? null : ( <>\n              <Button placement=\"right\" variant=\"btn btn-primary mt-2\"  onClick={()=>handleShowPost()} >New Post</Button>\n  {showPost && <NewPost openPost={showPost}   handleClosePost={handleClosePost} />}\n  </>)\n                        }\n               <tr >\n                   <th scope=\"col\">User</th>\n                   <th scope=\"col\" >Post</th>\n                   <th scope=\"col\">Time</th>\n               </tr>\n               </thead>\n               {posts.map(p => (\n               <tbody key=\"{p.id}\">\n               <tr className=\"row\">\n                   <th >{p.created_by}</th>\n                   <td  className=\"col-sm-3\">{p.message}</td>\n                   <td>{p.created_at}</td>\n               </tr>\n               </tbody>\n                   ))}\n\n           </table>\n\n</div>\n    )\n}\nexport default TopicDetail;"]},"metadata":{},"sourceType":"module"}